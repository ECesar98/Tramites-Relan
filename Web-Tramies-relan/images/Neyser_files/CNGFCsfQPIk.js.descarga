if (self.CavalryLogger) { CavalryLogger.start_js(["kX694"]); }

__d('ScrollPositionFixer',['Event','nullthrows'],(function a(b,c,d,e,f,g){'use strict';var h={_bodyElement:c('nullthrows')(document.body),_domModifiedListener:null,_element:null,_htmlElement:c('nullthrows')(document.documentElement),_originalLeft:0,_originalTop:0,fixToElement:function i(j){var k=arguments.length<=1||arguments[1]===undefined?h._htmlElement:arguments[1];if(this._element)throw new Error('Scroll position fixer is already holding on to an element:'+this._element);this._element=j;this._originalTop=this._calculateElementTop();this._originalLeft=this._calculateElementLeft();this._onSubtreeModified();this._domModifiedListener=c('Event').listen(k,'DOMSubtreeModified',this._onSubtreeModified.bind(this));},release:function i(){if(!this._element)throw new Error('Scroll position fixer is not holding on to an element!');this._onSubtreeModified();this._domModifiedListener.remove();this._domModifiedListener=null;this._element=null;},_onSubtreeModified:function i(){window.scrollBy(this._calculateElementLeft()-this._originalLeft,this._calculateElementTop()-this._originalTop);},_calculateElementTop:function i(){var j=this._htmlElement.scrollTop||this._bodyElement.scrollTop;return this._element.offsetTop-j;},_calculateElementLeft:function i(){var j=this._htmlElement.scrollLeft||this._bodyElement.scrollLeft;return this._element.offsetLeft-j;}};h.fixToElement=h.fixToElement.bind(h);h.release=h.release.bind(h);f.exports=h;}),null);
__d('TimelineJumperPager.react',['ix','cx','fbt','Image.react','Link.react','Layout.react','React','XUIText.react','XUIButton.react','XUICard.react','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('Layout.react').FillColumn,n=c('Layout.react').Column;k=babelHelpers.inherits(o,c('React').Component);l=k&&k.prototype;o.prototype.$TimelineJumperPager1=function(){return c('React').createElement(c('XUICard.react'),{className:"_2jgi"},c('React').createElement(c('Link.react'),{className:"_2jgl",href:'#',onClick:this.props.onClick,role:'button'},c('React').createElement(c('Layout.react'),{className:"_2pi1"},c('React').createElement(n,{className:"_3-8_"},c('React').createElement(c('XUIText.react'),{weight:'bold',display:'block',size:'xlarge'},this.$TimelineJumperPager2())),c('React').createElement(m,{className:"_2jgm"},c('React').createElement(c('Image.react'),{src:h("117307")})))));};o.prototype.$TimelineJumperPager2=function(){return j._("Ver publicaciones recientes");};o.prototype.$TimelineJumperPager3=function(){return c('React').createElement(c('XUIButton.react'),{className:"_2jgg",image:c('React').createElement(c('Image.react'),{src:h("128521")}),label:this.$TimelineJumperPager2(),onClick:this.props.onClick,size:'xlarge'});};o.prototype.render=function(){if(this.props.shouldUseFigHeader){return this.$TimelineJumperPager1();}else return this.$TimelineJumperPager3();};function o(){k.apply(this,arguments);}f.exports=o;}),null);
__d('TimelineJumperStoryUtil',['DataStore','FBJSON'],(function a(b,c,d,e,f,g){'use strict';var h={getTimeFromStory:function i(j){if(!j.id)return null;var k=c('DataStore').get(j,'store');if(!k)return null;var l=c('FBJSON').parse(k);return parseInt(l.timestamp,10);}};f.exports=h;}),null);
__d('TimelineMonitorElements',['Arbiter','Event','Run','Vector','ViewportBounds','TimelineJumperStoryUtil','queryThenMutateDOM','throttle'],(function a(b,c,d,e,f,g){'use strict';var h=null,i=null,j=[],k=0,l=null,m=false;function n(){j=[];h=null;i=null;k=0;l&&l.remove();l=null;m=false;}function o(){if(!l)l=c('Event').listen(window,'scroll',c('throttle')(p,50));if(!m){c('Run').onLeave(n);m=true;}p();}function p(){c('queryThenMutateDOM')(r,q,'TimelineMonitorElements/scroll');}function q(){if(i){c('Arbiter').inform(t.ELEMENT_CHANGED,i);h=i;i=null;}}function r(){var u=c('ViewportBounds').getTop()+c('Vector').getScrollPosition().y,v=s(u);if(v){if(h&&h.id===v.id){k=u;return;}var w=c('TimelineJumperStoryUtil').getTimeFromStory(v);if(!w)return;i={timestamp:w,fromAbove:k<u};}k=u;}function s(u){for(var v=0;v<j.length;v++){var w=j[v],x=c('Vector').getElementPosition(w).y+c('Vector').getElementDimensions(w).y;if(u<=x)return w;}return null;}var t={ELEMENT_CHANGED:'TimelineMonitorElements/elementChanged',monitorTopElement:function u(v){j.unshift(v);o();},monitorBottomElement:function u(v){j.push(v);o();},clear:function u(){j=[];k=0;h=null;i=null;}};f.exports=t;}),null);
__d('TimelineJumperStore',['fbt','FluxReduceStore','immutable','SimpleNUXMessage','SimpleNUXMessageTypes','TimelineJumperDispatcher','TimelineJumperStoryUtil','TimelineMonitorElements','TimelineSectionToken','TimelineSectionTokenConstants','DateConsts'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('immutable').List,l=c('TimelineSectionTokenConstants').RECENT_TOKEN,m=c('DateConsts').MS_PER_SEC,n=2;i=babelHelpers.inherits(o,c('FluxReduceStore'));j=i&&i.prototype;o.prototype.getInitialState=function(){return {error:null,isPrevPageReady:false,nextCursor:null,nextPageLoadingToken:null,prevCursor:null,prevPageLoadingToken:null,prevPage:k([]),profileID:null,retryCount:0,scrollToElement:null,showNux:false,storyFragments:k([]),viewerID:null};};o.prototype.reduce=function(p,q){var r=q.payload;switch(q.actionType){case 'initialize':if(r){var s=!c('SimpleNUXMessage').hasUserSeenMessage(c('SimpleNUXMessageTypes').PROFILE_JUMPER_NUX);p=babelHelpers['extends']({},this.getInitialState(),{nextCursor:r.nextCursor,prevCursor:r.prevCursor,profileID:r.profileID,storyFragments:k(r.storyFragments),viewerID:r.viewerID,showNux:s});}break;case 'header_nav_scroll_to':if(r){var t=this.getStory(r.key);if(t){p=babelHelpers['extends']({},p,{scrollToElement:t});}else{c('TimelineMonitorElements').clear();p=this.$TimelineJumperPageStore1(r.key,p);}}break;case 'fetch_next_page':p=babelHelpers['extends']({},p,{nextPageLoadingToken:this.getNextCursor()});break;case 'prefetch_prev_page':p=babelHelpers['extends']({},p,{prevPageLoadingToken:this.getPrevCursor(),showNux:false});break;case 'next_page_fetch_success':if(r&&r.cursorToken!==this.getNextPageLoadingToken())break;if(r&&Array.isArray(r.stories)&&r.stories.length!==0){p=this.$TimelineJumperPageStore2('next_fetch',p,r);}else p=this.$TimelineJumperPageStore3('next_fetch',p);break;case 'prev_page_fetch_success':if(r&&r.cursorToken!==this.getPrevPageLoadingToken())break;if(r&&Array.isArray(r.stories)&&r.stories.length!==0){p=this.$TimelineJumperPageStore2('prev_fetch',p,r);}else p=this.$TimelineJumperPageStore3('prev_fetch',p);break;case 'page_fetch_timeout':case 'page_fetch_fail':if(!r)break;p=this.$TimelineJumperPageStore4(p,r.direction,r.errorMessage,r.errorCode);break;case 'show_prev_page':p=this.$TimelineJumperPageStore5(p);break;case 'close_nux':p=babelHelpers['extends']({},p,{showNux:false});break;case 'clear_scroll_to_element':p=babelHelpers['extends']({},p,{scrollToElement:null});break;case 'on_leave':default:p=this.getInitialState();break;}return p;};o.prototype.getError=function(){return this.getState().error;};o.prototype.getNextPageLoadingToken=function(){return this.getState().nextPageLoadingToken;};o.prototype.getPrevPageLoadingToken=function(){return this.getState().prevPageLoadingToken;};o.prototype.getIsPrevPageReady=function(){return this.getState().isPrevPageReady;};o.prototype.getNextCursor=function(){return this.getState().nextCursor;};o.prototype.getPrevCursor=function(){return this.getState().prevCursor;};o.prototype.getPrevPage=function(){return this.getState().prevPage;};o.prototype.getProfileID=function(){return this.getState().profileID;};o.prototype.getScrollToElement=function(){return this.getState().scrollToElement;};o.prototype.getShouldShowNux=function(){return this.getState().showNux;};o.prototype.getStoryFragments=function(){return this.getState().storyFragments;};o.prototype.getViewerID=function(){return this.getState().viewerID;};o.prototype.$TimelineJumperPageStore4=function(p,q,r,s){var t=s&&s===500;if(!t&&p.retryCount<n)return this.$TimelineJumperPageStore6(p,q);var u=void 0;if(!r||t){u=h._("Lo sentimos, pero esta p\u00e1gina no se carg\u00f3 apropiadamente. Vuelve a intentarlo.");}else u=r;if(q==='next_fetch'){p=babelHelpers['extends']({},p,{error:u.toString()});}else p=babelHelpers['extends']({},p,{error:u.toString(),isPrevPageReady:false});return p;};o.prototype.$TimelineJumperPageStore6=function(p,q){if(q==='next_fetch'){p=babelHelpers['extends']({},p,{nextPageLoadingToken:null,retryCount:p.retryCount+1});}else p=babelHelpers['extends']({},p,{prevPageLoadingToken:null,isPrevPageReady:false,retryCount:p.retryCount+1});return p;};o.prototype.$TimelineJumperPageStore2=function(p,q,r){if(p==='prev_fetch'){q=babelHelpers['extends']({},q,{prevPageLoadingToken:null,isPrevPageReady:true,prevCursor:r.cursor,prevPage:k(r.stories)});}else{var s=this.getStoryFragments().concat(r.stories);q=babelHelpers['extends']({},q,{nextPageLoadingToken:null,nextCursor:r.cursor,storyFragments:s});}return q;};o.prototype.$TimelineJumperPageStore3=function(p,q){if(p==='prev_fetch'){q=babelHelpers['extends']({},q,{prevPageLoadingToken:null,isPrevPageReady:false,prevCursor:null,prevPage:k([])});}else q=babelHelpers['extends']({},q,{nextPageLoadingToken:null,nextCursor:null});return q;};o.prototype.$TimelineJumperPageStore5=function(p){var q=this.getPrevPage().concat(this.getStoryFragments());return babelHelpers['extends']({},p,{isPrevPageReady:false,prevPage:k([]),storyFragments:q});};o.prototype.$TimelineJumperPageStore1=function(p,q){var r=null,s=null;if(p===l){s=c('TimelineSectionToken').getCursorFromRecentToken();}else{s=c('TimelineSectionToken').getCursorFrom(p);r=s;}return babelHelpers['extends']({},this.getInitialState(),{profileID:q.profileID,nextCursor:s,prevCursor:r,showNux:q.showNux,viewerID:q.viewerID});};o.prototype.getStory=function(p){var q=this.getStoryFragments();if(q.size===0)return null;var r=void 0;if(p===l){r=Date.now()/m;}else{var s=c('TimelineSectionToken').getYearFrom(p),t=c('TimelineSectionToken').getMonthFrom(p);r=new Date(s,t,1).valueOf()/m-1;}var u=c('TimelineJumperStoryUtil').getTimeFromStory(q.first()),v=c('TimelineJumperStoryUtil').getTimeFromStory(q.last());if(!v||!u)return null;if(r>u){return null;}else if(r<v)return null;var w=void 0,x=void 0;for(var y=0;y<q.size;y++){w=q.get(y);x=c('TimelineJumperStoryUtil').getTimeFromStory(w);if(x&&x>r)continue;break;}return w;};function o(){i.apply(this,arguments);}f.exports=new o(c('TimelineJumperDispatcher'));}),null);
__d("XTimelineJumperAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/timeline\/jumper\/async\/",{cursor:{type:"String"},is_front_fetch:{type:"Bool",defaultValue:false},profile_id:{type:"FBID",required:true},viewer_id:{type:"FBID"}});}),null);
__d('TimelineJumperContainer.react',['cx','fbt','Arbiter','DOMContainer.react','DOMScroll','FBMorePager.react','FluxContainer','immutable','ProfileTimelineUILogger','React','Run','ScrollPositionFixer','SimpleNUXMessage','SimpleNUXMessageTypes','TimelineJumperAction','TimelineJumperDispatcher','TimelineJumperGatingConfig','TimelineJumperPager.react','TimelineJumperStore','TimelineMonitorElements','TimelineStickyHeaderWithJumperNav','Vector','XUIAmbientNUX.react','XUINotice.react','XUISpinner.react','XTimelineJumperAsyncController','getViewportDimensions','tidyEvent'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('immutable').List,m=100;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;n.getStores=function(){return [c('TimelineJumperStore')];};n.calculateState=function(o){var p=c('TimelineJumperStore').getError(),q=c('TimelineJumperStore').getIsPrevPageReady(),r=c('TimelineJumperStore').getNextCursor(),s=c('TimelineJumperStore').getNextPageLoadingToken(),t=c('TimelineJumperStore').getPrevPageLoadingToken(),u=c('TimelineJumperStore').getPrevCursor(),v=c('TimelineJumperStore').getProfileID(),w=c('TimelineJumperStore').getScrollToElement(),x=c('TimelineJumperStore').getShouldShowNux(),y=c('TimelineJumperStore').getStoryFragments(),z=c('TimelineJumperStore').getViewerID();return {error:p,isPrevPageReady:q,nextCursor:r,nextPageLoadingToken:s,prevCursor:u,prevPageLoadingToken:t,profileID:v,scrollToElement:w,showNux:x,storyFragments:y,viewerID:z};};function n(o){k.constructor.call(this,o);c('TimelineJumperDispatcher').explicitlyRegisterStores([c('TimelineJumperStore')]);this.$TimelineJumperContainer5=c('TimelineJumperGatingConfig').bufferValue+c('getViewportDimensions')().height*c('TimelineJumperGatingConfig').bufferRatio;this.$TimelineJumperContainer6=true;c('TimelineJumperAction').initialize({profileID:o.profileID,nextCursor:o.initialAfterCursor,prevCursor:o.initialBeforeCursor,storyFragments:o.initialStoryFragments,viewerID:o.viewerID});c('Run').onLeave(function(){return this.reset();}.bind(this));}n.prototype.reset=function(){c('TimelineJumperAction').onLeave();};n.prototype.$TimelineJumperContainer7=function(){c('tidyEvent')(c('Arbiter').subscribe(c('TimelineMonitorElements').ELEMENT_CHANGED,function(o,p){c('TimelineStickyHeaderWithJumperNav').updateSelectedWithData(p);}));};n.prototype.$TimelineJumperContainer8=function(){if(this.state.nextPageLoadingToken===null&&this.state.nextCursor&&this.$TimelineJumperContainer6){c('TimelineJumperAction').fetchNextPage();this.$TimelineJumperContainer9('next_fetch');c('ProfileTimelineUILogger').logJumperMoreStoriesSpinnerView(this.state.nextCursor||'');this.$TimelineJumperContainer6=false;}};n.prototype.$TimelineJumperContainer10=function(){if(!this.state.isPrevPageReady&&this.state.prevPageLoadingToken===null&&this.state.prevCursor){if(this.state.showNux)this.$TimelineJumperContainer11();c('TimelineJumperAction').prefetchPrevPage();this.$TimelineJumperContainer9('prev_fetch');c('ProfileTimelineUILogger').logJumperRecentStoriesButtonClick(this.state.prevCursor||'');}};n.prototype.$TimelineJumperContainer12=function(){if(!this.state.isPrevPageReady){this.$TimelineJumperContainer10();}else c('TimelineJumperAction').showPrevPage();};n.prototype.$TimelineJumperContainer9=function(o){var p=o==='prev_fetch',q=p?this.state.prevCursor:this.state.nextCursor,r=c('XTimelineJumperAsyncController').getURIBuilder().setString('cursor',q).setFBID('profile_id',this.state.profileID).setFBID('viewer_id',this.state.viewerID).setBool('is_front_fetch',p).getURI();c('TimelineJumperAction').fetchURI(r,o);};n.prototype.componentDidMount=function(){this.$TimelineJumperContainer7();this.$TimelineJumperContainer13(null,this.state);};n.prototype.componentWillUpdate=function(o,p){if(p.isPrevPageReady)c('ScrollPositionFixer').fixToElement(this.$TimelineJumperContainer3,this.$TimelineJumperContainer2);};n.prototype.componentDidUpdate=function(o,p){if(this.state.isPrevPageReady)this.$TimelineJumperContainer12();if(this.state.nextCursor&&this.state.nextCursor.includes('jumper')&&this.$TimelineJumperContainer1){var q=c('Vector').getElementPosition(this.$TimelineJumperContainer1);window.scrollTo(0,q.y-m);}if(p.isPrevPageReady)setTimeout(c('ScrollPositionFixer').release,0);if(this.state.scrollToElement){c('DOMScroll').scrollTo(this.state.scrollToElement);c('TimelineJumperAction').clearScrollTo();}if(this.state.nextPageLoadingToken===null&&p.nextPageLoadingToken!==null)this.$TimelineJumperContainer6=true;this.$TimelineJumperContainer13(p,this.state);};n.prototype.$TimelineJumperContainer13=function(o,p){var q=p.storyFragments.size,r=o?o.storyFragments.size:0,s=q-r;if(s===0)return;if(o&&o.isPrevPageReady){var t=p.storyFragments.take(s).reverse();t.map(function(v){return c('TimelineMonitorElements').monitorTopElement(v);});}else{var u=p.storyFragments.takeLast(s);u.map(function(v){return c('TimelineMonitorElements').monitorBottomElement(v);});}};n.prototype.$TimelineJumperContainer14=function(){return c('React').createElement('div',{ref:function(o){return this.$TimelineJumperContainer1=o;}.bind(this),className:"_3fkc"},c('React').createElement(c('XUISpinner.react'),{background:'light',size:'large'}));};n.prototype.$TimelineJumperContainer15=function(){var o=c('TimelineJumperGatingConfig').shouldUseFigHeader;if(this.state.error!==null&&this.state.prevPageLoadingToken!==null)return c('React').createElement(c('XUINotice.react'),{use:'warn'},this.state.error);var p=this.state.prevPageLoadingToken!==null?this.$TimelineJumperContainer16():c('React').createElement('div',null,this.$TimelineJumperContainer17(),this.$TimelineJumperContainer18()),q=null;if(this.state.storyFragments.size!==0)q=this.state.prevCursor!==null||this.state.isPrevPageReady||this.state.prevPageLoadingToken!==null?c('React').createElement('div',{className:(!o?"_5_-0":'')+(o?' '+"_5_-1":'')+(' '+"_3-96")},p):null;return q;};n.prototype.$TimelineJumperContainer16=function(){var o=c('TimelineJumperGatingConfig').shouldUseFigHeader;return c('React').createElement('div',{className:"_3bwv"+(o?' '+"_2pig":'')+(!o?' '+"_nsv":''),background:'transparent'},this.$TimelineJumperContainer14());};n.prototype.$TimelineJumperContainer17=function(){return c('React').createElement('div',{ref:function(o){return this.$TimelineJumperContainer4=o;}.bind(this)},c('React').createElement(c('TimelineJumperPager.react'),{shouldUseFigHeader:c('TimelineJumperGatingConfig').shouldUseFigHeader,onClick:function(){return this.$TimelineJumperContainer10();}.bind(this)}));};n.prototype.$TimelineJumperContainer19=function(){if(this.state.error!==null&&this.state.nextPageLoadingToken!==null)return c('React').createElement(c('XUINotice.react'),{use:'warn'},this.state.error);var o=c('React').createElement(c('FBMorePager.react'),{onMore:function(){return this.$TimelineJumperContainer8();}.bind(this),buffer:this.$TimelineJumperContainer5},this.$TimelineJumperContainer14());return this.state.nextCursor===null?null:o;};n.prototype.$TimelineJumperContainer18=function(){if(!this.state.showNux)return null;var o=i._("Puedes cargar m\u00e1s publicaciones recientes a partir de ahora.");return c('React').createElement(c('XUIAmbientNUX.react'),{contextRef:function(){return this.$TimelineJumperContainer4;}.bind(this),onCloseButtonClick:function(){return this.$TimelineJumperContainer11();}.bind(this),position:'below',shown:this.state.showNux,width:'auto',alignment:'center',key:'jumper_nux'},o);};n.prototype.$TimelineJumperContainer11=function(){c('SimpleNUXMessage').markMessageSeenByUser(c('SimpleNUXMessageTypes').PROFILE_JUMPER_NUX);};n.prototype.render=function(){return c('React').createElement('div',{ref:function(o){return this.$TimelineJumperContainer2=o;}.bind(this)},this.$TimelineJumperContainer15(),this.state.storyFragments.map(function(o){return c('React').createElement(c('DOMContainer.react'),{key:o.id},o);}),c('React').createElement('div',{ref:function(o){return this.$TimelineJumperContainer3=o;}.bind(this)}),this.$TimelineJumperContainer19());};f.exports=c('FluxContainer').create(n);}),null);